---
title: Reference
description: The reference for the available commands and flags for the Bluelink CLI
---

This section provides the reference for the available commands and flags for the Bluelink CLI.

Options that are marked with a `boolean` type are command line flags that do not take a value, however their config file and environment variable equivalents do take a value that should be set to one of `true`, `false`, `1` or `0`.

## Global Options

<Callout title="Note" type="info">
CLI options take precedence over [configuration](/docs/cli/configuration) from environment variables and values from a configuration file.
</Callout>

### `--config`

The path to the configuration file to source CLI configuration from.
Relative paths are expected to be relative to the current working directory.

**Type**: `string`

**Default Value**: When a value is not provided, the CLI will search for a file as per the [configuration](/docs/cli/configuration#configuration-file) documentation.

### `--deploy-config-file`

**Environment Variable**: `BLUELINK_CLI_DEPLOY_CONFIG_FILE`

**Configuration Key**: `deployConfigFile`

**Type**: `string`

**Default Value**: `bluelink.deploy.jsonc`

The path to the deploy configuration file that contains blueprint variable overrides and configuration for providers and transformers.
This file is expected to be in the JSON with Commas and Comments format described in the [Deploy Configuration](/docs/cli/deploy-configuration) doc.

If the file is not found, the CLI will send empty configuration to the Deploy Engine, which will in most cases result in an error in the response from the Deploy Engine.

This file is used by the `stage`, `deploy`, `destroy`, `plugins (install|uninstall)` and `validate` commands.

When the Deploy Engine is running on the same machine as the CLI,
the commands that use this file will automatically install any
missing plugins defined in the `dependencies` section.

### `--connect-protocol`

**Environment Variable**: `BLUELINK_CLI_CONNECT_PROTOCOL`

**Configuration Key**: `connectProtocol`

**Type**: `string`

**Default Value**: `unix`

**Allowed Values**: `unix` | `tcp`

The protocol to connect to the deploy engine with,
this can be either `unix` or `tcp`.
A unix socket can only be used on linux, macos and other unix-like operating systems.
To use a `unix` socket on windows, you will need to use WSL 2 or above.

### `--engine-endpoint`

**Environment Variable**: `BLUELINK_CLI_ENGINE_ENDPOINT`

**Configuration Key**: `engineEndpoint`

**Type**: `string`

**Default Value**: `http://localhost:8325`

The endpoint of the deploy engine api, this is used if `--connect-protocol` is set to `tcp`.

### `--engine-auth-config-file`

**Environment Variable**: `BLUELINK_CLI_ENGINE_AUTH_CONFIG_FILE`

**Configuration Key**: `engineAuthConfigFile`

**Type**: `string`

**Default Value**: `$HOME/.bluelink/clients/engine.auth.json` on Linux or macOS and `%LOCALAPPDATA%\NewStack\Bluelink\clients\engine.auth.json` on Windows.

The path to the authentication configuration file for the deploy engine.
This is used to authenticate with the deploy engine when using the `stage`, `deploy`, `destroy` and `validate` commands.

See the [Auth Configuration](/docs/cli/auth-configuration) documentation for more information on what is expected to be present in this file.

## `init`

`bluelink init [options] [directory]`

This command initialises a new blueprint project.

Run the command without any flags and go through the interactive prompts to create a new blueprint project:

```bash
bluelink init
```

Initialising a new blueprint project with a pre-selected template:

```bash
bluelink init --template aws-simple-api
```

Initialising a new blueprint project in a specific directory:

```bash
bluelink init --project-name my-project ./my-project
```

Initialising a new blueprint project without interactive prompts:

```bash
bluelink init --skip-prompts --project-name my-project --template aws-simple-api
```

### `--template`

**Environment Variable**: `BLUELINK_CLI_INIT_TEMPLATE`

**Configuration Key**: `initTemplate`

**Type**: `string`

**Default Value**: `scaffold`

The template to use for the new blueprint project.
The default template is a scaffold project that generates all the files needed for a project,
populating the blueprint file with placeholder values.

### `--project-name`

**Environment Variable**: `BLUELINK_CLI_INIT_PROJECT_NAME`

**Configuration Key**: `initProjectName`

**Type**: `string`

The name of the new blueprint project.

### `--blueprint-format`

**Environment Variable**: `BLUELINK_CLI_INIT_BLUEPRINT_FORMAT`

**Configuration Key**: `initBlueprintFormat`

**Type**: `string`

**Default Value**: `yaml`

The format of the blueprint file to use.
This can be either `yaml` or `jsonc`.

### `--no-git`

**Environment Variable**: `BLUELINK_CLI_INIT_NO_GIT`

**Configuration Key**: `initNoGit`

**Type**: `boolean`

**Default Value**: `false`

If true, the project will not be initialised as a git repository.

### `--skip-prompts`

**Environment Variable**: `BLUELINK_CLI_INIT_SKIP_PROMPTS`

**Configuration Key**: `initSkipPrompts`

**Type**: `boolean`

**Default Value**: `false`

Skip interactive prompts and use flag values directly.
Requires all necessary flags to be provided (`--project-name` and `--template`).

### `[directory]`

**Type**: `string`

The directory to initialise the new blueprint project in.
If not provided, the project will be initialised in a sub-directory based on the project name.

## `templates`

This is the command category for blueprint project templates.
This is useful for listing available templates maintained by the Bluelink team.

### `list`

This command lists all the available templates maintained by the Bluelink team.

Run the command without any flags to list all the available templates:

```bash
bluelink templates list
```

This is mostly useful in interactive mode where you can navigate and filter the templates available.

## `validate`

This command validates a blueprint file.
It will validate the project blueprint and other configuration files.

Run the command without any flags and go through the interactive prompts to validate a blueprint file:

```bash
bluelink validate
```

Validating a pre-selected local blueprint file:
```bash
bluelink validate --blueprint-file ./project.blueprint.yaml
```

Validating a pre-selected public URL:
```bash
bluelink validate --blueprint-file https://example.com/project.blueprint.yaml
```

Validating a pre-selected path to a file in an object storage bucket:
```bash
bluelink validate --blueprint-file s3://bucket-name/path/to/project.blueprint.yaml
```

### `--blueprint-file`

**Environment Variable**: `BLUELINK_CLI_VALIDATE_BLUEPRINT_FILE`

**Configuration Key**: `validateBlueprintFile`

**Type**: `string`

**Default Value**: `project.blueprint.yaml`

The blueprint file to validate.
This can be a local file, a public URL or a path to a file in an object storage bucket.
Local files can be specified as a relative or absolute path to the file.
Public URLs must start with `https://` and represent a valid URL to a blueprint file.
Object storage bucket files must be specified in the format of `{scheme}://{bucket-name}/{object-path}`,
where `{scheme}` is one of the following: `s3`, `gcs`, `azureblob`.

### `--check-blueprint-vars`

**Environment Variable**: `BLUELINK_CLI_VALIDATE_CHECK_BLUEPRINT_VARS`

**Configuration Key**: `validateCheckBlueprintVars`

**Type**: `boolean`

**Default Value**: `false`

This flag enables validation of the blueprint variable values that are set in the deploy configuration file.
By default, the CLI will not validate the blueprint variable overrides set in the deploy configuration file when validating a blueprint file.

<Callout title="Interactive mode" type="warning">
This can only be set as a command line flag, environment variable or configuration file key.
It is not an option in the interactive prompts for the validate command.
</Callout>

### `--check-plugin-config`

**Environment Variable**: `BLUELINK_CLI_VALIDATE_CHECK_PLUGIN_CONFIG`

**Configuration Key**: `validateCheckPluginConfig`

**Type**: `boolean`

**Default Value**: `false`

By default, the validate command only runs validation on a provided blueprint file.
You can use the `--check-blueprint-vars` flag to validate the blueprint variable values set in the deploy configuration file.
By default, configuration specific to providers and transformers is not validated as a part of this command.
When this flag is set, the provider and transformer configuration sourced from deploy config files will be validated against the plugin configuration schemas.

<Callout title="Interactive mode" type="warning">
This can only be set as a command line flag, environment variable or configuration file key.
It is not an option in the interactive prompts for the validate command.
</Callout>

## `stage`

This command is used to stage changes for a blueprint instance.
It should be used to generate change sets for updating existing blueprint instances or creating new blueprint instances.
This will stream events from the change staging process as they occur.

The change set ID will be rendered in the output of the command once the change staging process has completed,
this can then be used with the `deploy` command to deploy the change set.

Run the command without any flags and go through the interactive prompts to stage changes for a blueprint instance:

```bash
bluelink stage
```

Staging changes for a pre-selected local blueprint file for a new blueprint deployment:

```bash
bluelink stage --blueprint-file ./project.blueprint.yaml
```

Staging changes for a pre-selected local blueprint file for an existing blueprint instance:

```bash
bluelink stage --instance-name orders-stack --blueprint-file ./project.blueprint.yaml
```

### `--instance-name`

**Environment Variable**: `BLUELINK_CLI_STAGE_CHANGES_INSTANCE_NAME`

**Configuration Key**: `stageChangesInstanceName`

**Type**: `string`

The unique name of an existing blueprint instance to stage changes for.
The instance name should not be confused with the instance ID, which is a random identifier assigned
to the instance by the deploy engine, the instance name is one you define when creating the instance.
This should be left empty if the `--instance-id` flag is provided.

### `--instance-id`

**Environment Variable**: `BLUELINK_CLI_STAGE_CHANGES_INSTANCE_ID`

**Configuration Key**: `stageChangesInstanceId`

**Type**: `string`

The random identifier assigned to an existing blueprint instance by the deploy engine.
This should be left empty if the `--instance-name` flag is provided.

### `--blueprint-file`

**Environment Variable**: `BLUELINK_CLI_STAGE_CHANGES_BLUEPRINT_FILE`

**Configuration Key**: `stageChangesBlueprintFile`

**Type**: `string`

**Default Value**: `project.blueprint.yaml`

The blueprint file to use in the change staging process.
This can be a local file, a public URL or a path to a file in an object storage bucket.
Local files can be specified as a relative or absolute path to the file.
Public URLs must start with `https://` and represent a valid URL to a blueprint file.
Object storage bucket files must be specified in the format of `{scheme}://{bucket-name}/{object-path}`,
where `{scheme}` is one of the following: `s3`, `gcs`, `azureblob`.

### `--destroy`

**Environment Variable**: `BLUELINK_CLI_STAGE_CHANGES_DESTROY`

**Configuration Key**: `stageChangesDestroy`

**Type**: `boolean`

**Default Value**: `false`

If true, the change set will be created for a destroy operation.
This will only be used if the `--instance-id` or `--instance-name` flags are provided.

## `deploy`

This command is used to deploy a change set for a given blueprint instance.
It should be used to deploy updates to existing blueprint instances and new blueprint instances.
This will stream events from the deployment process as they occur.

Run the command without any flags and go through the interactive prompts to deploy a change set for a blueprint instance:

```bash
bluelink deploy
```

Deploying a change set for a pre-selected instance using the latest change set in the deploy engine for that instance:

```bash
bluelink deploy --instance-name order-stack
```

Deploying a pre-selected instance and change set for a blueprint deployment:

```bash
bluelink deploy --instance-name order-stack --change-set-id a471bbb8-1267-4e65-873b-fa86bca71fcf
```

Staging and deploying changes for a blueprint instance in a single command:

```bash
bluelink deploy --stage --blueprint-file ./project.blueprint.yaml --instance-name order-stack
```

Deploying without interactive prompts using a pre-staged change set:

```bash
bluelink deploy --skip-prompts --instance-name order-stack --change-set-id a471bbb8-1267-4e65-873b-fa86bca71fcf
```

Staging and deploying without interactive prompts:

```bash
bluelink deploy --skip-prompts --stage --auto-approve --blueprint-file ./project.blueprint.yaml --instance-name order-stack
```

### `--change-set-id`

**Environment Variable**: `BLUELINK_CLI_DEPLOY_CHANGE_SET_ID`

**Configuration Key**: `deployChangeSetId`

**Type**: `string`

The ID of the change set to deploy.
This is the result of running the `stage` command for a new or existing blueprint instance.
The change set ID is optional and the latest change set for a given instance name or ID will be used if not provided.

This flag should not be provided if the `--stage` flag is set.

### `--instance-name`

**Environment Variable**: `BLUELINK_CLI_DEPLOY_INSTANCE_NAME`

**Configuration Key**: `deployInstanceName`

**Type**: `string`

The user-defined unique name of the blueprint instance to deploy the change set for.
This should be left empty if the `--instance-id` flag is provided.

### `--instance-id`

**Environment Variable**: `BLUELINK_CLI_DEPLOY_INSTANCE_ID`

**Configuration Key**: `deployInstanceId`

**Type**: `string`

The generated ID of the blueprint instance to deploy the change set for.
This should be left empty if the `--instance-name` flag is provided.

### `--blueprint-file`

**Environment Variable**: `BLUELINK_CLI_DEPLOY_BLUEPRINT_FILE`

**Configuration Key**: `deployBlueprintFile`

**Type**: `string`

**Default Value**: `project.blueprint.yaml`

The blueprint file to use for the deployment.
This can be a local file, a public URL or a path to a file in an object storage bucket.
Local files can be specified as a relative or absolute path to the file.
Public URLs must start with `https://` and represent a valid URL to a blueprint file.
Object storage bucket files must be specified in the format of `{scheme}://{bucket-name}/{object-path}`,
where `{scheme}` is one of the following: `s3`, `gcs`, `azureblob`.

The blueprint file is required for both staging (when using `--stage`) and deployment execution.
During deployment, the source blueprint is used to resolve runtime substitutions and orchestrate the deployment process.
Runtime substitutions are values that can only be resolved at deploy time, such as references to deployed resource attributes (e.g., `${resources.orderFunction.spec.arn}`) or function calls that depend on them.

### `--stage`

**Environment Variable**: `BLUELINK_CLI_DEPLOY_STAGE`

**Configuration Key**: `deployStage`

**Type**: `boolean`

**Default Value**: `false`

If true, the deploy command will first stage the changes to produce a change set
that can be reviewed before deploying.
In interactive environments, you will be prompted to review the change set before deploying.
To skip the change set confirmation, you must combine this with the `--auto-approve` flag
to automatically approve the change set and deploy the blueprint instance.

This flag should not be provided if the `--change-set-id` option is set.

### `--auto-approve`

**Environment Variable**: `BLUELINK_CLI_DEPLOY_AUTO_APPROVE`

**Configuration Key**: `deployAutoApprove`

**Type**: `boolean`

**Default Value**: `false`

If true, the deploy command will automatically approve the change set and deploy the blueprint instance.
This is only effective when the `--stage` flag is set, otherwise, either the provided or latest
change set will be deployed.

Note that the CLI automatically detects non-interactive environments, so this flag is typically only needed when running in an interactive terminal where you want to bypass the change set confirmation.

### `--auto-rollback`

**Environment Variable**: `BLUELINK_CLI_DEPLOY_AUTO_ROLLBACK`

**Configuration Key**: `deployAutoRollback`

**Type**: `boolean`

**Default Value**: `false`

If true, the deployment will automatically roll back to the previous state if the deployment fails.
When enabled, the CLI will automatically initiate a rollback operation without requiring manual intervention.

If you prefer to review failures before rolling back, leave this flag disabled and use the `rollback` command manually after inspecting the failure.

### `--as-rollback`

**Environment Variable**: `BLUELINK_CLI_DEPLOY_AS_ROLLBACK`

**Configuration Key**: `deployAsRollback`

**Type**: `boolean`

**Default Value**: `false`

Set this flag to indicate that the current deployment action is intended to be a rollback for a previous action.
This is used when manually rolling back a previously deployed or destroyed blueprint instance.
It signals to the deploy engine that this deployment is a "restoration" of a previously destroyed instance
or a rollback to a previous state of a blueprint instance.

This flag is typically set automatically when using the `rollback` command, but can be set manually
when using the `deploy` command directly for rollback scenarios.

### `--force`

**Environment Variable**: `BLUELINK_CLI_DEPLOY_FORCE`

**Configuration Key**: `deployForce`

**Type**: `boolean`

**Default Value**: `false`

Force the deployment to proceed, ignoring state conflicts.
This is an escape hatch for recovering from stuck states where the blueprint instance is in an inconsistent state
(e.g., stuck in "Deploying" or "Preparing" status due to a crash or unexpected termination).

<Callout title="Caution" type="error">
Use this flag with care. It bypasses state validation checks that normally prevent concurrent or conflicting operations.
Only use this when you are certain the instance is in a stuck state and no other deployment process is running.
</Callout>

### `--skip-prompts`

**Environment Variable**: `BLUELINK_CLI_DEPLOY_SKIP_PROMPTS`

**Configuration Key**: `deploySkipPrompts`

**Type**: `boolean`

**Default Value**: `false`

Skip interactive prompts for user input and use flag values directly.
Requires all necessary flags to be provided (`--instance-name` or `--instance-id`, and either `--stage` or `--change-set-id`).

<Callout title="Important" type="warning">
This flag only skips prompts for collecting user input (such as instance name or change set selection).
It does **not** skip the change set confirmation stage when using `--stage`.
To skip the change set confirmation, you must also set `--auto-approve`.

These flags are intentionally separate to allow for different automation scenarios:
- Use `--skip-prompts` alone when you want to provide inputs via flags but still review change sets interactively.
- Use `--skip-prompts` with `--auto-approve` for fully non-interactive deployments.

Note that the CLI automatically detects non-interactive environments, so these flags are typically only needed when running in an interactive terminal where you want to bypass prompts.
</Callout>

## `destroy`

This command is used to destroy a blueprint instance.
This will stream events from the destroy process as they occur.

Run the command without any flags and go through the interactive prompts to destroy a blueprint instance:

```bash
bluelink destroy
```

Destroying a pre-selected instance using the latest change set in the deploy engine for that instance:

```bash
bluelink destroy --instance-name order-stack
```

Destroying a pre-selected instance and change set for a blueprint deployment:

```bash
bluelink destroy --instance-name order-stack --change-set-id a471bbb8-1267-4e65-873b-fa86bca71fcf
```

Staging and destroying a blueprint instance in a single command:

```bash
bluelink destroy --stage --blueprint-file ./project.blueprint.yaml --instance-name order-stack
```

Destroying without interactive prompts using a pre-staged change set:

```bash
bluelink destroy --skip-prompts --instance-name order-stack --change-set-id a471bbb8-1267-4e65-873b-fa86bca71fcf
```

Staging and destroying without interactive prompts:

```bash
bluelink destroy --skip-prompts --stage --auto-approve --blueprint-file ./project.blueprint.yaml --instance-name order-stack
```

### `--change-set-id`

**Environment Variable**: `BLUELINK_CLI_DESTROY_CHANGE_SET_ID`

**Configuration Key**: `destroyChangeSetId`

**Type**: `string`

The ID of the change set to use to destroy the blueprint instance.
This is the result of running the `stage` command with the `--destroy` flag for an existing blueprint instance.
The change set ID is optional and the latest change set for a given instance name or ID will be used if not provided.

This flag should not be provided if the `--stage` flag is set.

### `--instance-name`

**Environment Variable**: `BLUELINK_CLI_DESTROY_INSTANCE_NAME`

**Configuration Key**: `destroyInstanceName`

**Type**: `string`

The user-defined unique name of the blueprint instance to destroy.
This should be left empty if the `--instance-id` flag is provided.

### `--instance-id`

**Environment Variable**: `BLUELINK_CLI_DESTROY_INSTANCE_ID`

**Configuration Key**: `destroyInstanceId`

**Type**: `string`

The generated ID of the blueprint instance to destroy.
This should be left empty if the `--instance-name` flag is provided.

### `--blueprint-file`

**Environment Variable**: `BLUELINK_CLI_DESTROY_BLUEPRINT_FILE`

**Configuration Key**: `destroyBlueprintFile`

**Type**: `string`

**Default Value**: `project.blueprint.yaml`

The blueprint file to use in the change staging process when the `--stage` flag is set.
This can be a local file, a public URL or a path to a file in an object storage bucket.
Local files can be specified as a relative or absolute path to the file.
Public URLs must start with `https://` and represent a valid URL to a blueprint file.
Object storage bucket files must be specified in the format of `{scheme}://{bucket-name}/{object-path}`,
where `{scheme}` is one of the following: `s3`, `gcs`, `azureblob`.

This flag is only effective when the `--stage` flag is set.

### `--stage`

**Environment Variable**: `BLUELINK_CLI_DESTROY_STAGE`

**Configuration Key**: `destroyStage`

**Type**: `boolean`

**Default Value**: `false`

If true, the destroy command will first stage the changes to produce a change set
that can be reviewed before destroying the blueprint instance.
In interactive environments, you will be prompted to review the change set before destroying the blueprint instance.
To skip the change set confirmation, you must combine this with the `--auto-approve` flag
to automatically approve the change set and destroy the blueprint instance.

This flag should not be provided if the `--change-set-id` option is set.

### `--auto-approve`

**Environment Variable**: `BLUELINK_CLI_DESTROY_AUTO_APPROVE`

**Configuration Key**: `destroyAutoApprove`

**Type**: `boolean`

**Default Value**: `false`

If true, the destroy command will automatically approve the change set and destroy the blueprint instance.
This is only effective if the `--stage` flag is set.

Note that the CLI automatically detects non-interactive environments, so this flag is typically only needed when running in an interactive terminal where you want to bypass the change set confirmation.

### `--as-rollback`

**Environment Variable**: `BLUELINK_CLI_DESTROY_AS_ROLLBACK`

**Configuration Key**: `destroyAsRollback`

**Type**: `boolean`

**Default Value**: `false`

Set this flag to indicate that the current destroy action is intended to be a rollback for a previous action.
This is used when manually rolling back a previously deployed blueprint instance.
It signals to the deploy engine that this destroy operation is a rollback to a previous state where the current blueprint instance
was deployed successfully but another part of the deployment failed. This typically happens when the current blueprint instance
is a child of another blueprint instance that failed to deploy.

This flag is typically set automatically when using the `rollback` command, but can be set manually
when using the `destroy` command directly for rollback scenarios.

### `--force`

**Environment Variable**: `BLUELINK_CLI_DESTROY_FORCE`

**Configuration Key**: `destroyForce`

**Type**: `boolean`

**Default Value**: `false`

Force the destroy operation to complete, ignoring any failures during the destroy process and removing the blueprint instance record regardless of the outcome.
This is an escape hatch for removing blueprint instances that are stuck or cannot be destroyed through normal means
(e.g., when underlying resources were manually deleted outside of the system or when a provider is unavailable).

<Callout title="Danger" type="error">
**This is a destructive operation that may leave orphaned cloud resources.**

When using `--force`, the destroy process will:
- Attempt to destroy resources but ignore any failures
- Remove the blueprint instance record from the deploy engine regardless of whether resources were successfully destroyed
- Not attempt to clean up any resources that failed to be destroyed

Only use this flag as a last resort when you have verified that the underlying resources have already been removed
or when you accept the risk of orphaned resources that may incur ongoing costs.
</Callout>

### `--skip-prompts`

**Environment Variable**: `BLUELINK_CLI_DESTROY_SKIP_PROMPTS`

**Configuration Key**: `destroySkipPrompts`

**Type**: `boolean`

**Default Value**: `false`

Skip interactive prompts for user input and use flag values directly.
Requires all necessary flags to be provided (`--instance-name` or `--instance-id`, and either `--stage` or `--change-set-id`).

<Callout title="Important" type="warning">
This flag only skips prompts for collecting user input (such as instance name or change set selection).
It does **not** skip the change set confirmation stage when using `--stage`.
To skip the change set confirmation, you must also set `--auto-approve`.

These flags are intentionally separate to allow for different automation scenarios:
- Use `--skip-prompts` alone when you want to provide inputs via flags but still review change sets interactively.
- Use `--skip-prompts` with `--auto-approve` for fully non-interactive destroy operations.

Note that the CLI automatically detects non-interactive environments, so these flags are typically only needed when running in an interactive terminal where you want to bypass prompts.
</Callout>

## `inspect`

This command is used to inspect the status of a specific blueprint instance.
It displays the current state of the instance, including deployment status, resources, and any errors.
If a deployment or destroy operation is currently in progress, the command will stream real-time updates
until the operation completes.

Run the command without any flags and go through the interactive prompts to inspect a blueprint instance:

```bash
bluelink inspect
```

Inspecting a pre-selected instance by name:

```bash
bluelink inspect --instance-name order-stack
```

Inspecting a pre-selected instance by ID:

```bash
bluelink inspect --instance-id a471bbb8-1267-4e65-873b-fa86bca71fcf
```

### `--instance-name`

**Environment Variable**: `BLUELINK_CLI_INSPECT_INSTANCE_NAME`

**Configuration Key**: `inspectInstanceName`

**Type**: `string`

The user-defined unique name of the blueprint instance to inspect.
This should be left empty if the `--instance-id` flag is provided.

### `--instance-id`

**Environment Variable**: `BLUELINK_CLI_INSPECT_INSTANCE_ID`

**Configuration Key**: `inspectInstanceId`

**Type**: `string`

The generated ID of the blueprint instance to inspect.
This should be left empty if the `--instance-name` flag is provided.

## `rollback`

This command is used to manually roll back a failed deployment or update to a blueprint instance.

Use this command when you have not opted into `--auto-rollback` on the `deploy` command and need to manually
initiate a rollback after inspecting a deployment failure.

Run the command without any flags and go through the interactive prompts to roll back a blueprint instance:

```bash
bluelink rollback
```

Rolling back a pre-selected instance:

```bash
bluelink rollback --instance-name order-stack
```

Rolling back with a specific blueprint file:

```bash
bluelink rollback --instance-name order-stack --blueprint-file ./project.blueprint.yaml
```

Rolling back without manually approving the rollback change set:

```bash
bluelink rollback --instance-name order-stack --blueprint-file ./project.blueprint.yaml --auto-approve
```

### `--instance-name`

**Environment Variable**: `BLUELINK_CLI_ROLLBACK_INSTANCE_NAME`

**Configuration Key**: `rollbackInstanceName`

**Type**: `string`

The user-defined unique name of the blueprint instance to roll back.
This should be left empty if the `--instance-id` flag is provided.

### `--instance-id`

**Environment Variable**: `BLUELINK_CLI_ROLLBACK_INSTANCE_ID`

**Configuration Key**: `rollbackInstanceId`

**Type**: `string`

The generated ID of the blueprint instance to roll back.
This should be left empty if the `--instance-name` flag is provided.

### `--blueprint-file`

**Environment Variable**: `BLUELINK_CLI_ROLLBACK_BLUEPRINT_FILE`

**Configuration Key**: `rollbackBlueprintFile`

**Type**: `string`

**Default Value**: `project.blueprint.yaml`

The blueprint file to use for the rollback operation.
This can be a local file, a public URL or a path to a file in an object storage bucket.
Local files can be specified as a relative or absolute path to the file.
Public URLs must start with `https://` and represent a valid URL to a blueprint file.
Object storage bucket files must be specified in the format of `{scheme}://{bucket-name}/{object-path}`,
where `{scheme}` is one of the following: `s3`, `gcs`, `azureblob`.

### `--auto-approve`

**Environment Variable**: `BLUELINK_CLI_ROLLBACK_AUTO_APPROVE`

**Configuration Key**: `rollbackAutoApprove`

**Type**: `boolean`

**Default Value**: `false`

If true, the rollback command will automatically approve and execute the rollback without prompting for confirmation.

Note that the CLI automatically detects non-interactive environments, so this flag is typically only needed when running in an interactive terminal where you want to bypass the rollback confirmation.

## `sync`

This is the command category for syncing deployment state between different environments.
These commands are useful for sharing deployment state between different environments when adopting a local deployment strategy.
A local deployment strategy is where the deploy engine is running on the same machine as the CLI when running commands such as `deploy` or `destroy`.

An example use case would be a CI/CD pipeline that runs the `stage` and `deploy` commands for a blueprint deployment using a local deploy engine installation
in the container or VM for the job.
Through the use of these commands, the pipeline can import the deployment state from the previous run of the pipeline and carry out the next deployment to the same environment.

<Callout title="Note" type="info">
The sync commands can only be used when the deploy engine is running on the same machine as the CLI.
The configuration for the deploy engine will be used to determine how data should be imported to or exported
from the configured storage engine.
</Callout>

### `--engine-config-file`

**Environment Variable**: `BLUELINK_CLI_SYNC_ENGINE_CONFIG_FILE`

**Configuration Key**: `syncEngineConfigFile`

**Type**: `string`

**Default Value**: `$HOME/.bluelink/engine/config.json` on Linux or macOS 
and `%LOCALAPPDATA%\NewStack\Bluelink\engine\config.json` on Windows.

The path to the deploy engine configuration file that is needed to retrieve the details for the storage engine
so that import and export operations can be performed.

### `import`

This command is used to import the entire state or specific blueprint instances from a local file or a remote source.

<Callout title="Caution" type="warning">
When importing the entire state, the deploy engine will overwrite the existing state with the imported state.
</Callout>

An example of importing the entire state from a local file:
```bash
bluelink sync import --file ./deployment-state.tar.gz
```

An example of importing one or more specific blueprint deployment instances from a remote source:
```bash
# The input file should be in the JSON format exported
# by the `export` command with the `--instances [idOrName1,idOrName2,...]` flag.
bluelink sync import --instances --file s3://bucket-name/path/to/instances-export.json
```

#### `--instances`

**Environment Variable**: `BLUELINK_CLI_SYNC_IMPORT_INSTANCES`

**Configuration Key**: `syncImportInstances`

**Type**: `boolean`

**Default Value**: `false`

A flag to indicate the format of the input file is for importing specific blueprint deployment instances.
When set, the input file is expected to be a JSON array of blueprint deployment instances.

#### `--file`

**Environment Variable**: `BLUELINK_CLI_SYNC_IMPORT_FILE`

**Configuration Key**: `syncImportFile`

**Type**: `string`

The path to the input file to import.
When `--instances` is **_not_** set, the input file is expected to be a `*.tar.gz` archive of the entire deploy engine state.
When `--instances` is set, the input file is expected to be a JSON array of blueprint deployment instances.

This can be a local file or a path to a file in an object storage bucket
in the format of `{scheme}://{bucket-name}/{object-path}`,
where `{scheme}` is one of the following: `s3`, `gcs`, `azureblob`.
The same mechanism that is used for resolving remote blueprint file sources is used.

<Callout title="Remote Storage Credentials" type="warning">
Credentials for remote object storage buckets are derived from the current environment as per the standard SDK
mechanisms for each cloud provider.
</Callout>

### `export`

This command is used to export the entire state or specific blueprint instances to be shared between environments.

An example of exporting the entire state to a local file:
```bash
bluelink sync export --file ./deployment-state.tar.gz
```

An example of exporting one or more specific blueprint deployment instances to a remote source:
```bash
bluelink sync export --instances stack-1,stack-2,stack-3 --file s3://bucket-name/path/to/instances-export.json
```

#### `--instances`

**Environment Variable**: `BLUELINK_CLI_SYNC_EXPORT_INSTANCES`

**Configuration Key**: `syncExportInstances`

**Type**: `string`

A comma-separated list of blueprint deployment instances to export.
You can use either the instance name or ID of each blueprint deployment instance
that you want to export.

When this option is set, the output file will be a JSON file containing an array of blueprint deployment instances.

#### `--file`

**Environment Variable**: `BLUELINK_CLI_SYNC_EXPORT_FILE`

**Configuration Key**: `syncExportFile`

**Type**: `string`

The path to the output file to write the export to.

For clarity, the target file should be a `*.json` file when the `--instances` option is set and a `*.tar.gz` archive for a full state export.

This can be a local file or a path to a location in an object storage bucket
in the format of `{scheme}://{bucket-name}/{object-path}`,
where `{scheme}` is one of the following: `s3`, `gcs`, `azureblob`.
The same mechanism that is used for resolving remote blueprint file locations is used.

<Callout title="Remote Storage Credentials" type="warning">
Credentials for remote object storage buckets are derived from the current environment as per the standard SDK
mechanisms for each cloud provider.
</Callout>

## `plugins`

This is the command category for managing deploy engine plugins installed on the machine
that the CLI is running on.

<Callout title="Note" type="info">
You can only manage plugins from the CLI for the machine that you call the CLI commands on.
These plugins will only be available when running commands such as `deploy` or `destroy`
against an instance of the deploy engine running on the same machine.
This is the default behaviour if a custom host is not specified for the deploy engine.
</Callout>

### `login`

This command logs into a plugin registry to allow the installation of plugins from specific protected registries by host.

An example of logging into a plugin registry:
```bash
bluelink plugins login registry.customhost.com
```

The auth configuration for plugin registries is expected to be present in the `$HOME/.bluelink/clients/plugins.auth.json` file
on Linux or macOS and `%LOCALAPPDATA%\NewStack\Bluelink\clients\plugins.auth.json` on Windows.
See the [Plugin Registry Authentication Protocol](/docs/plugin-framework/registry-protocols-formats/auth-protocol) for more information on how to authenticate with a plugin registry.

#### `[registry-host]`

**Type**: `string`

The host of the plugin registry to log into.

### `list`

Lists all the plugins that are installed on the machine that the CLI is running on.

#### `--type`

**Environment Variable**: `BLUELINK_CLI_PLUGINS_LIST_TYPE`

**Configuration Key**: `pluginsListType`

**Type**: `string`

**Allowed Values**: `provider` | `transformer` | `all`

**Default Value**: `all`

The type of plugins to list.

### `install`

`bluelink plugins install [plugin-1] [plugin-2] ...`

Installs one or more plugins on the machine that the CLI is running on.
This command takes one or more plugin IDs as arguments.

An example of installing plugins defined in the deploy configuration file:
```bash
bluelink plugins install
```

An example of installing a single plugin:
```bash
bluelink plugins install newstack-cloud/aws
```

An example of installing multiple plugins:
```bash
bluelink plugins install newstack-cloud/aws newstack-cloud/azure registry.customhost.com/my-org/gcp
```

An example of installing a specific version of a plugin:
```bash
bluelink plugins install newstack-cloud/aws@1.5.0
```

Plugins that exist in the bluelink registry do not need the full URL with the host name,
only plugins stored in a custom registry need the full URL.
For example, the plugin ID `bluelink/aws` will be resolved to `registry.bluelink.dev/bluelink/aws`.

You can pin a specific version of a plugin by appending `@{version}` to the plugin ID,
where `{version}` is a valid semantic version or version constraint.

As plugin IDs are globally unique, the CLI does not differentiate between provider and transformer plugins
for the sake of installation.

### `uninstall`

`bluelink plugins uninstall [plugin-1] [plugin-2] ...`

Uninstalls one or more plugins from the machine that the CLI is running on.
This command takes one or more plugin IDs as arguments.

An example of uninstalling a single plugin:
```bash
bluelink plugins uninstall newstack-cloud/aws
```

An example of uninstalling multiple plugins:
```bash
bluelink plugins uninstall newstack-cloud/aws newstack-cloud/azure registry.customhost.com/my-org/gcp
```

Like with the `install` command, plugins that exist in the bluelink registry do not need the full URL with the host name,
only plugins stored in a custom registry need the full URL.
For example, the plugin ID `bluelink/aws` will be resolved to `registry.bluelink.dev/bluelink/aws`.

As plugin IDs are globally unique, the CLI does not differentiate between provider and transformer plugins
when removing them.

## `help`

For information on all the available commands and global options, run the following:
```bash
bluelink help
```

To get usage information for a specific command, run the following:
```bash
bluelink [command] --help
```

## `version`

This command prints the version of the CLI along with the build OS, architecture and date of the build.

Run the command to print the version of the CLI:

```bash
bluelink version
```
